{% load static %}

{% block content %}
<button class="chatbot-toggler">
  <span class="material-symbols-rounded">mode_comment</span>
  <span class="material-symbols-outlined">close</span>
</button>
<div class="chatbot">
  <header>
    <h2>Chatbot</h2>
    <span class="close-btn material-symbols-outlined">close</span>
  </header>
  <ul class="chatbox">
    <li class="chat incoming">
      <span class="material-symbols-outlined">smart_toy</span>
      <p>Hi there {% if request.user.is_authenticated or not request.user.is_staff %}{{request.user.username}}{% endif %}ðŸ‘‹<br>How can I help you today?</p>
    </li>
    {% if not request.user.is_authenticated or request.user.is_staff %}
    <!-- <li class="chat incoming">
      <span class="material-symbols-outlined">smart_toy</span>
      <p>Please Provide Patient ID or Name.</p>
    </li> -->
    {% endif %}
  </ul>
  <div class="chat-input">
    <textarea placeholder="Enter a message..." spellcheck="false" required style="background-color: #f0f0f0; color: #000000;"></textarea>
    <span id="send-btn" class="material-symbols-rounded">send</span>
  </div>
</div>

<script type="application/javascript">
  $(function(){
    window.ApiKey = '';
    window.CsrfToken = '{{ csrf_token }}';
    window.ApiUrl = "{% url 'dataStorage:bot_chat' %}";

    let incomingChatBtn = createChatBtn(
      "Login",
      "chat_option btn btn-sm btn-outline-info m-2 float-end",
      "login",
    );
    chatbox.appendChild(incomingChatBtn);
    chatbox.scrollTo(0, chatbox.scrollHeight);
    incomingChatBtn.addEventListener("click", handleOpt);
  });
</script>
{% endblock content %}