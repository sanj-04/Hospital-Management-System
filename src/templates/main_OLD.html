
<html lang="en">
<head>
  {% load static %}{% load crispy_forms_tags %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MedIQ</title>
  <link rel="stylesheet" href="{% static 'css/main.css'%}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/all.css'%}" type="text/css">
  <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}" type="text/css">
  <link rel="shortcut icon" href="{% static 'images/favicon.ico' type='image/x-icon' %}">
</head>
<body class="body">

  <!--navbar-->
    <nav class="navbar">
      <img src="{% static 'images/logo.png'%}" class="logo">
      <input type="checkbox" id="nav-toggle" class="nav-toggle">
      <label for="nav-toggle" class="nav-toggle-label">
          <span></span>
      </label>
      <div class="navbar-links">
          {% if request.user.is_authenticated and user %}
          <a {% if request.user.is_staff %}href="{% url 'admin:index' %}"{% endif %} class="nav-link">{{ user }}</a>
          {% if request.user.is_staff %}<a href="{% url 'dataStorage:doctor_home' %}" class="nav-link">Doctor Home</a>{% endif %}
          <a class="nav-link">
            <form action="{% url 'auth_logout' %}" method="post">
              {% csrf_token %}
              <button type="submit" class="nav-link btn btn-dark"><i class="bi bi-box-arrow-right"></i> Logout</button>
            </form>
          </a>
          {% endif %}
          <a href="#" class="login-link" {% if request.user.is_authenticated and user %}hidden{% endif %}>Login</a>
          <a href="#" class="register-link">Register</a>
          <a href="#contact-page">Contact</a>
      </div>
  </nav>
  
  <!--carousel-->
  <div class="carousel">
    <div class="carousel-item active">
      <img src="{% static 'images/image1.jpg'%}" alt="Image 1">
    </div>
    <div class="carousel-item">
      <img src="{% static 'images/image2.jpg'%}" alt="Image 2">
    </div>
    <div class="carousel-item">
      <img src="{% static 'images/image3.jpg'%}" alt="Image 3">
    </div>
  </div>

  <!--Abouts-->
  <div class="about-section">
    <div class="text-content">
      <h2>Meet Dr. Carson</h2>
      <p>Protect yourself and others by wearing masks and washing hands frequently. Outdoor is safer than indoor for gatherings or holding events. People who get sick with Coronavirus disease (COVID-19) will experience mild to moderate symptoms and recover without special treatments.</p>
      <p>You can feel free to use this CSS template for your medical profession or health care related websites. Nisi aliquam eu. Interdum et malesuada fames ac ante ipsum primis in faucibus aliquam.</p>
    </div>
    <div class="image-container">
      <img src="{% static 'images/image2.jpg' %}" alt="Dr. Carson" class="round-image">
    </div>
  </div>

    <hr style="border-top: 2px solid #390085; width: 100%;"> <!--Horizontal Line-->

  <!--Cards-->
  <div class="cards-section">
    <h2 align="center">Facilities Provided</h2>
    <iframe src="{% url 'dataStorage:cards' %}" width="100%" height="400px" frameborder="0"></iframe>
  </div>

    <hr style="border-top: 2px solid #390085; width: 100%;"> <!--Horizontal Line-->

  <!--contact-->
  <section class="contact-section" id="contact-page">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <h2>Opening Hours</h2>
          <div class="opening-hours">
            <p>Sunday: Closed</p>
            <p>Monday, Tuesday - Firday: 8:00 AM - 3:30 PM</p>
            <p>Saturday: 10:30 AM - 5:30 PM</p>
          </div>
        </div>
        <div class="col-md-4">
          <h2>Our Clinic</h2>
          <div class="clinic-info">
            <p>name@domain.com</p>
            <p>123 Digital Art Street, San Diego, CA 92123</p>
          </div>
        </div>
        <div class="col-md-4">
          <h2>Socials</h2>
          <div class="social-links">
            <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-whatsapp"></i></a>
            <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Register Pop-up -->
<div class="register-popup" id="register-popup">
  <div class="register-content">
    <span class="close-button" onclick="closeLoginPopup();">&times;</span>
    <h2>Register (for new patients)</h2>
    <form>
      {% csrf_token %}
      <div class="card-body" id="addPatientModalBody">
        <div class="col-md-12">
          <div id="div_id_patient" class="mb-3">
            <label for="id_patient" class="form-label requiredField">
            Patient Name<span class="asteriskField">*</span>
            </label>
            <input type="text" name="patient" class="textinput form-control" required="" id="id_patient">
          </div>
        </div>
        <div class="col-md-12">
          <div id="div_id_date_of_birth" class="mb-3">
            <label for="id_date_of_birth" class="form-label requiredField">
            Date of Birth<span class="asteriskField">*</span>
            </label>
            <input type="text" name="date_of_birth" tabindex="1" class="datepicker_dob form-control" data-date-format="dd/mm/yyyy" required="required" autocomplete="off" id="id_date_of_birth">
          </div>
        </div>
        <div class="col-md-12">
          <div id="div_id_phone_number" class="mb-3">
            <label for="id_phone_number" class="form-label requiredField">
            Phone Number<span class="asteriskField">*</span>
            </label>
            <input type="text" name="phone_number" class="textinput form-control" required="" id="id_phone_number">
          </div>
        </div>
      </div>
      <div class="button-group">
        <button type="button" class="submit-button" onclick="addPatientDetail();">Submit</button>
        <button type="reset" class="reset-button">Reset</button>
      </div>
    </form>
  </div>
</div>

<!-- Login Pop-up -->
<div class="login-popup" id="login-popup">
  <div class="login-content">
    <span class="close-button" onclick="closeLoginPopup()">&times;</span>
    <h2>Login (for Admins)</h2>
    <form method="post" action="{% url 'auth_login' %}" class="needs-validation" novalidate>
      {% csrf_token %}
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" required>
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>
      <div class="button-group">
        <button type="submit" class="submit-button">Submit</button>
        <button type="reset" class="reset-button">Reset</button>
      </div>
      <a href="#" class="forgot-password" onclick="showForgotPasswordPopup()">Forgot Password?</a>
    </form>
  </div>
</div>

<!-- Forgot Password Popup -->
<div class="forgot-password-popup" id="forgot-password-popup" style="display: none;">
  <div class="forgot-password-content">
    <span class="close-button" onclick="closeForgotPasswordPopup()">&times;</span>
    <h2>Password Reset</h2>
    <p>Email has been sent.</p>
    <button class="Ok-button" onclick="closeForgotPasswordPopup()">OK</button>
  </div>
</div>

  <script type="text/javascript" src="{% static 'javascript/jquery.js' %}"></script>
  <script type="text/javascript" src="{% static 'javascript/main.js'%}"></script>
  <script type="text/javascript" src="{% static 'javascript/bootstrap-datepicker.js' %}"></script>
  <script type="application/javascript">
    $(function(){
      console.log("loaded");
      datepicker_operation();
    });

    function addPatientDetail() {
      let patient_name = document.getElementById('id_patient').value;
      let date_of_birth = document.getElementById('id_date_of_birth').value;
      let phone_number = document.getElementById('id_phone_number').value;
      $.ajax({
        url : "{% url 'dataStorage:patient_operation' %}",
        type : "POST",
        data : {
          'patient_name': patient_name,
          'date_of_birth': date_of_birth,
          'phone_number': phone_number,
          'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        beforeSend: function (xhr) {
          xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
        },
        success : function(HttpResponse, textMsg, xhr) {
          window.scrollTo(0, 0);
          closeLoginPopup();
          document.getElementById('id_patient').value = "";
          document.getElementById('id_date_of_birth').value = "";
          document.getElementById('id_phone_number').value = "";
        },
        error : function(xhr, errmsg, err) {
          console.log(xhr);
          window.scrollTo(0, 0);
          alert('Please fill in all fields.');
        },
        statusCode: {
          401: function() {
            window.scrollTo(0, 0);
            location.reload();
          }
        }
      });
    }

    function closeLoginPopup() {
      document.getElementById("register-popup").setAttribute("style", "display: none;");
    }
</script>
</body>
</html>